(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const n of t.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function r(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function a(e){if(e.ep)return;e.ep=!0;const t=r(e);fetch(e.href,t)}})();const h=chrome.storage.local;async function g(){let o=(await h.get({groups:[]})).groups;return o.length===0&&(o=[{id:"default-group-home",title:"Inicio",order:0}],await d(o)),o.sort((r,a)=>r.order-a.order)}async function d(i){await h.set({groups:i})}async function y(i){const o=await g(),r={id:crypto.randomUUID(),title:i,order:o.length};return o.push(r),await d(o),r}async function D(i,o){const r=await g(),a=r.findIndex(e=>e.id===i);a>-1&&(r[a]={...r[a],...o},await d(r))}async function I(i){const r=(await g()).filter(t=>t.id!==i);r.forEach((t,n)=>t.order=n),await d(r);const e=(await u()).filter(t=>t.groupId!==i);await p(e)}async function u(){return(await h.get({dials:[]})).dials}async function U(i){return(await u()).filter(r=>r.groupId===i).sort((r,a)=>r.order-a.order)}async function p(i){await h.set({dials:i})}async function G(i){const o=await u(),r=o.filter(e=>e.groupId===i.groupId),a={...i,id:crypto.randomUUID(),order:r.length};return o.push(a),await p(o),a}async function x(i,o){const r=await u(),a=r.findIndex(e=>e.id===i);a>-1&&(r[a]={...r[a],...o},await p(r))}async function S(i){const o=await u(),r=o.find(t=>t.id===i);if(!r)return;const a=o.filter(t=>t.id!==i);a.filter(t=>t.groupId===r.groupId).sort((t,n)=>t.order-n.order).forEach((t,n)=>t.order=n),await p(a)}async function v(){if(!chrome.bookmarks)return 0;const i=await chrome.bookmarks.getTree();let o=await g(),r=await u(),a=0;const e=(t,n)=>{if(t.url&&n)r.push({id:crypto.randomUUID(),groupId:n,title:t.title||"Sin tÃ­tulo",url:t.url,order:r.filter(l=>l.groupId===n).length}),a++;else if(t.children&&t.children.length>0){const l=t.title?`ðŸ“ ${t.title}`:"Marcadores Importados",s=crypto.randomUUID();o.push({id:s,title:l,order:o.length});for(const c of t.children)e(c,s)}};for(const t of i[0].children||[])e(t);return await d(o),await p(r),a}async function b(i){const r=new DOMParser().parseFromString(i,"text/html");let a=await g(),e=await u(),t=0;const n=r.querySelectorAll("h3");if(n.length===0){const l=r.querySelectorAll("a");if(l.length>0){const s=crypto.randomUUID();a.push({id:s,title:"ðŸ“ HTML File",order:a.length}),l.forEach(c=>{e.push({id:crypto.randomUUID(),groupId:s,title:c.textContent||"Sin tÃ­tulo",url:c.href,order:e.filter(f=>f.groupId===s).length}),t++})}}else n.forEach(l=>{const s=l.nextElementSibling;if(s&&s.tagName.toLowerCase()==="dl"){const c=s.querySelectorAll("a");if(c.length>0){const f=crypto.randomUUID();a.push({id:f,title:`ðŸ“ ${l.textContent||"Carpeta"}`,order:a.length}),c.forEach(m=>{e.push({id:crypto.randomUUID(),groupId:f,title:m.textContent||"Sin tÃ­tulo",url:m.href,order:e.filter(w=>w.groupId===f).length}),t++})}}});return await d(a),await p(e),t}export{y as a,u as b,U as c,x as d,S as e,b as f,g,G as h,v as i,I as r,p as s,D as u};
